#include "object.h"
#include <stdio.h>

struct OBJECT_TYPE *object_type = NULL;

static int init(struct OBJECT *self_void)
{
  struct OBJECT *self = (struct OBJECT *) self_void;
  printf("Hello I am tp_init in object.c\n");
  self->type = object_type;
}

static int finalize(struct OBJECT *self)
{
  printf("Hello I am tp_finalize in object.c\n");
}

int ObjectTypeInit(struct OBJECT_TYPE *p)
{
  static struct OBJECT_TYPE object_type_instance;
  static int initialized = 0;
  if (0 == initialized)
    {
      object_type_instance.init = &init;
      object_type_instance.finalize = &finalize;
      p = &object_type_instance;
    }
  return 0;
}

